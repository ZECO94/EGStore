@{
    Layout = "_Pages1Layout";
    var user = (ApplicationUser)ViewData["user"];
}
@model Review

<h2>Write a Review for @Model.Product.ProductName</h2>

<form asp-action="WriteReview" method="post">
    <input type="hidden" asp-for="ProductId" />

    <div class="form-group">
        <label asp-for="Name"></label>
        <input asp-for="Name" class="form-control" value="@user.Name" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>

    <!-- Star Rating Section -->
    <div class="form-group">
        <label>Rating</label>
        <div class="star-rating">
            <span class="star" data-value="1">&#9733;</span>
            <span class="star" data-value="2">&#9733;</span>
            <span class="star" data-value="3">&#9733;</span>
            <span class="star" data-value="4">&#9733;</span>
            <span class="star" data-value="5">&#9733;</span>
        </div>
        <input type="hidden" asp-for="Rating" id="Rating" />
        <span asp-validation-for="Rating" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Comment"></label>
        <textarea asp-for="Comment" class="form-control"></textarea>
        <span asp-validation-for="Comment" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Submit Review</button>
</form>

<!-- Styling for the stars -->
<style>
    .star-rating {
        direction: rtl;
        display: inline-block;
        font-size: 2rem;
    }

    .star {
        cursor: pointer;
        color: #ddd;
    }

        .star:hover,
        .star:hover ~ .star {
            color: gold;
        }

        .star.selected {
            color: gold;
        }
</style>

<!-- JavaScript to handle star rating interaction -->
<script>
    document.querySelectorAll('.star').forEach(star => {
        star.addEventListener('click', function() {
            var value = this.getAttribute('data-value');
            document.getElementById('Rating').value = value;

            // Reset star selection
            document.querySelectorAll('.star').forEach(s => s.classList.remove('selected'));

            // Highlight selected stars
            this.classList.add('selected');
            let previousSibling = this.previousElementSibling;
            while(previousSibling) {
                previousSibling.classList.add('selected');
                previousSibling = previousSibling.previousElementSibling;
            }
        });
    });
</script>

@* @{
    Layout = "_PagesLayout";
    var user = (ApplicationUser)ViewData["user"];
}
@model Review

<h2>Write a Review for @Model.Product.ProductName</h2>

<form asp-action="WriteReview" method="post">
    <input type="hidden" asp-for="ProductId" />
    <div class="form-group">
        <label asp-for="Name"></label>
        <input asp-for="Name" class="form-control" value="@user.Name" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Rating"></label>
        <input asp-for="Rating" class="form-control" />
        <span asp-validation-for="Rating" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Comment"></label>
        <textarea asp-for="Comment" class="form-control"></textarea>
        <span asp-validation-for="Comment" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Submit Review</button>
</form> *@

